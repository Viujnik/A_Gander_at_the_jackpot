# A_Gander_at_the_jackpot

Добро пожаловать в симуляцию казино! Этот проект содержит простенькую симуляцию некоторых действий казино, модели
персонажей, фишек и коллекций и саму логику симуляции. Дальше поговорим подробнее об этом.

## Структуры для симуляции

### Структуры персонажей и фишек

Тут мы имеем следующие модели:

+ Игрок - обладает своим именем, балансом(выбирается случайно при регистрации), хп=100 и списком фишек(нетрудно
  догадаться, что баланс рассчитывается на основы фишек у игрока). У игрока есть следующие методы: set_balance(расчёт
  текущего баланса игрока на основе фишек), starting_chips(выбор случайного капитала игрока, после которого, кстати,
  используется set_balance), chips_to_bet(случайный выбор фишек для ставки), remove и add chips(для удаления и
  добавления фишек в список игрока соответственно, с последующим перерасчётом баланса с помощью set_balance).
+ Гуси - имеют именем, наглостью(audacity) и украденными фишками. Для этого класса определён метод still_money(случайный
  выбор фишек для кражи у игрока).
+ Военные Гуси - наследуются от Гусей. Дополнительно имеют метод son_of_bitch_attack(расчёт случайного урона по игроку).
+ Крикливые Гуси - наследуются тоже от Гусей. Дополнительно определен метод honk(для случайного расчёта уровня крика,
  чтобы оглушить игроков).
+ Стая гусей - наследуется от Гусей. Переопределено название(оно составляется так: "Стая из гусей: {имена гусей в
  стае}"), имеет размер стаи(size - количество гусей в списке), список гусей в стае(geese). Имеет метод collab_attack(
  где рассчитывается общий урон от гусей в стае - на основе атакующих функций военных/крикливых гусей).
+ Фишки - имеют свой наминал.

### Структуры коллекций

Что до "своих" коллекций:

+ CasinoBalance - коллекция для хранения балансов игроков казино(игрок - ключ, баланс - значение).
+ PlayerCollection - список для хранения игроков казино(например, для случайного выбора игрока при атаке гуся).
+ GooseCollection - список для хранения всех гусей казино(то есть всех классов, унаследованных от Goose).
+ ChipCollection - список для хранения всех фишек казино. Есть методы total_balance(для подсчета суммы значений фишек в списке) и take_chips_from_bank(для получения фишек казино для выдачи их игроку).

## Функции как шаг симуляции

Каждый шаг симуляции - 1 случайное действие из списка(ставка игрока, атака гуся, кража денег игрока, соединение гусей в
стаю), основная логика которой описана в функциях в src/pido_random_simulation.py в классе Actions:

+ Стоит выделить 1 функцию - player_check. Она проверяет баланс и хп игрока после соответствующих действиях(если
  баланс <= 0, то игрока ждёт полиция, если хп <= 0, то....rest in piece. Также игрок удаляется из списка игроков
  казино, если check вернул False).
+ player_bet - симуляция ставки игрока. Если random.random выдал <= 0.4 - выйгрыш, иначе - проигрыш. Из интересного -
  если банк казино пуст, а игрок победил - ставка выплачивается игроку обратно из-за невозможности выдать фишки.
+ goose_attack - выбирает случайного гуся и на основе типа гуся производит атаку на игрока/игроков. При выборе
  крикливого гуся или стаи гусей происходит выбор количества игроков для атаки(так как стая гусей и оглушение крикливого
  гуся действует на нескольких игроков) - от 0 до min(3, количество игроков в списке казино).
+ still_money - тут определена логика кражи денег гусём у игрока.
+ geese_collab - возвращает стаю случайных гусей(от 2 до min(4, количество гусей у казино)). При недостаточном
  количестве гусей в списке казино вернёт None.

## "Сердце" симуляции
Здесь определены список имен для игроков и гусей, функция run_simulation(для запуска симуляции с заданными количеством игроков/гусей и шагов симуляции) и класс Casino со следующими методами:
+ set_casino_balance - установка стартового баланса(на основе фишек казино с помощью total_balance) казино и фишек.
+ player_register и goose_register - регистрация игрока/гуся с случайным именем(и типом, для гусей).
+ simulation_action - вызов функции симуляции на основе полученного случайного шага из списка.

Вся эта красота(run_simulation) запускается из main.py, передавая 2 параметра функции - количество игроков/гусей(военных и крикливых) и шагов симуляции.

# Запуск программы
Для запуска симуляции напишите в консоль эту команду:
```bash
  uv run -m main
```
После чего введите число - количество игроков/гусей и после нажатия Enter - количество шагов симуляции.
